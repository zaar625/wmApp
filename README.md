# Work & Manage app 
매장을 운영하거나 근로자로써 일을 하게 될 때 기본적으로 근태관리를 합니다.<br>
하지만 매장을 운영하거나 일을 하게되면 투명한 근태관리가 이루어지고 있는지, 내 급여는 제대로 계산이 되고 있는지 늘 다시한번 확인하거나 캘린더에 작성하곤 합니다.<br>
이 앱은 이러한 불편함을 해소하고자 기획되었습니다. 매장 내 비치된 QR 코드로 출/퇴근 등록을 하며, 근무 종료와 동시에 캘린더에 기록이 남습니다. <br>
더 나아가 매장에 공유사항들을 사진을 첨부하여 함께 근무하는 사람들에게 공유가 가능합니다. 

## 사용 스킬
```bash
"react-native", "@reduxjs/toolkit", "@react-native-firebase/app", "@tanstack/react-query"
```
## 파일 구조도
아래는 프로젝트 파일 구조도입니다. 추후 협업 또는 유지보수를 고려하여 참고해 주시기 바랍니다. 
```javascript
  
📦App
 ┣ 📂api 
 ┃ ┣ 📂store // 매장에서 발생하는 api입니다. 
 ┃ ┃ ┗ 📂hooks //리액트 쿼리 훅을 사용할 경우 해당 폴더에 작성합니다.
 ┣ 📂assets 
 ┃ ┣ 📂icon
 ┃ ┃ ┣ 📜arrow_left.svg
 ┃ ┃ ┣ 📜index.ts // svg 공통 컴포넌트를 제작하기 위해 .svg의 name을 정의합니다.
 ┃ ┣ 📂img
 ┃ ┃ ┣ 📜eraser.png
 ┃ ┃ ┣ 📜imagePath.ts // 동적으로 이미지를 가져와야 할 경우 해당 파일에 작성합니다.
 ┃ ┣ 📂splash
 ┣ 📂common-components // APP에서 사용되는 공통 컴포넌트 입니다.
 ┣ 📂constant
 ┣ 📂hooks // 커스텀 훅을 작성할 경우 해당 폴더에 작성해주세요. 
 ┣ 📂screens //앱에서 나타나는 페이지들입니다. 
 ┃ ┣ 📂bottom_tab
 ┃ ┣ 📂login
 ┃ ┃ ┣ 📂employee
 ┃ ┃ ┣ 📂manager
 ┃ ┣ 📂onboarding
 ┃ ┣ 📂select_category
 ┃ ┣ 📂sign_up
 ┃ ┣ 📂tab_barcode
 ┃ ┣ 📂tab_calendar
 ┃ ┃ ┣ 📂components //해당 스크린에서만 사용되는 컴포넌트입니다. (주의: common-components는 전역적으로 사용되는 컴포넌트 모음입니다.)
 ┃ ┃ ┗ 📜index.tsx
 ┃ ┣ 📂tab_setting
 ┃ ┣ 📂tab_share
 ┃ ┗ 📂tab_store
 ┣ 📂state 
 ┃ ┣ 📂slice //리덕스 툴킷의 상태관리를 위한 슬라이스 모음입니다.
 ┃ ┗ 📜store.ts
 ┣ 📂theme
 ┣ 📂type
 ┣ 📂util //전역적으로 사용할 함수들을 작성해주세요. (ex: 햅틱 진동 함수, 이미지 리사이즈 함수 등)
```
## 페이지별 상세
### 1. 스플래쉬 ~ 온보딩
<img src='https://github.com/zaar625/wmApp/assets/69461545/d574c31a-ecd0-4e85-9ab6-3ce4975e5387' width=190px height='380px'/>
<img src='https://github.com/zaar625/wmApp/assets/69461545/d574c31a-ecd0-4e85-9ab6-3ce4975e5387' width=190px height='380px'/>

이 앱은 테마모드가 가능하도록 구현되어 있습니다. 앱 재시작 시 사용자가 선택한 모드로 켜져야 합니다. <br>스플래쉬 시작 시점에는 사용자가 저장한 테마모드의 값을 읽어오기 전이므로 동적으로 구현하기에 한계가 있었습니다. 
화면이 깜박이고 변화하는 테마색상을 보다 부드럽게 연출하기 위해 애니메이션 효과를 줍니다..

### 2. 로그인/회원가입

로그인 : <br>
- 이메일 유효성 검사, 가입된 유저가 옳바른 정보를 입력하지 않았을 경우 리턴되는 에러값을 이용하여 UI에 표시되며 포커싱이 되도록 구현되었습니다.<br>

회원가입:<br>
- 사용자가 입력하지 않은 필드값이 있을 경우 UI로 안내합니다. 회원가입시 최종적인 필드값만 필요하므로 onChange() 함수를 사용하지 않습니다.
- 필드 값을 작성할 경우 다음 필드 영역으로 자동 포커싱합니다.


### 3. 근무지 탭
#### 3-1. 매장 등록하기
- 사용자는 매장을 먼저 등록해야합니다. 매장을 등록하지 않으면 출/퇴근 등록 및 공유하기 기능이 제한됩니다.
- 매장에 비치된 QR코드를 스캔하기 위해 QR스크린으로 이동되며 이때 "카메라 허용"을 해야 스캔이 가능합니다. <br>해당 스크린은 사용자가 아래로 스와이프 할 경우 ```react-native-gesture-handler``` 이용하여 제스처를 구현하였으며 스크린이 종료됩니다.
- 데이터베이스에 QR이 없을 경우 팝업으로 사용자에게 안내합니다. 
#### 3-2. 현재 근무지
- 사용자가 매장 등록이 성공하면 매장 이름을 나타냅니다. 원하는 매장을 해당 리스트에서 삭제할 수 있습니다.(삭제 시 출/퇴근 및 공유기능 제한)
- 삭제 완료 시 toast 팝업으로 사용자에게 안내합니다.
- 매장 등록이 성공되는 시점 리액트 쿼리키를 이용하여 리스트를 업데이트 합니다.
#### 3-2. 월별 예상 급여
- 사용자가 등록한 매장들의 당월 총 근로시간과 총 급여를 산출하여 나타냅니다.
- 터치시 캘린더 탭으로 이동합니다.

### 4. 공유 탭
#### 4-1. 근무이력
- 사용자가 매장에 비치된 QR을 이용하여 출/퇴근 등록시 근무 상태가 변합니다.
- 근무 상태는 당일 기준으로 나타내며, 하루에 한 곳 이상에서 하는 근무자를 고려하여 ```flatList``` 로 carousel를 구현합니다.
- 실수로 근태등록을 잊거나 오버타임이 발생할 경우 근태수정을 통해 관리자에게 요청할 수 있습니다.
#### 4-2. 금일 전달 사항
- 등록된 매장 내에서 본인 또는 타 유저가 공유사항을 등록하면 해당 공유내용을 볼 수 있습니다.
- 금일 기준이며, 지난 리스트는 전체보기를 통해 확인할 수 있습니다.
- 전달사항 리스트에는 리스트별로 구별될 수 있는 구분선이 있지 않아 사용자가 터치시 터치한 리스트를 인지할 수 있도록 터치 애니메이션 효과를 넣었습니다.
- 공유내용 상세페이지는 수정 및 삭제 기능이 있으며 이미지 영역은 스크롤 값에 따라 세로 크기가 변하도록 되어있습니다.
#### 4-3. 전달 사항 작성하기
- 이미지는 최대 3장까지 첨부할 수 있으며, 업로드 시 ```react-native-image-resizer``` 를 이용하여 사이즈 및 확장자를 변경하여 최적화합니다.(이미지 필드값은 필수가 아닙니다.)
- 공유내용 작성 후 업로드시 사용자가 "공유하기" 버튼을 여러번 누르는 것을 방지하기 위해 로더를 사용합니다.

### 4. 출퇴든 탭
- 해당 스크린에서 버튼을 터치하면 QR 스크린이 활성화 됩니다.
- 매장 내 비치된 QR을 스캔하면 매장 정보를 가져오는데, 이때 매장내의 wifi와 사용자 디바이스에 연결된 와이파이 SSDI 값이 일치할 경우에만 출/퇴근을 찍을 수 있습니다.
- 출/퇴근을 등록하면 , 공유 탭 - 근무 이력이 업데이트 됩니다.
- 디바이스를 흔들면 바로 QR 스크린이 나타납니다.
  >  출/퇴근 탭에 바로 QR 스크린이 활성화 되지 않도록 해주세요. 근본적인 해결책을 찾지 못했습니다. 바로 활성화할 경우 ~
바로 활성화 하려는 이유가 무엇일까에 대한 고민을 해보면 사용자가 보다 빨리 스캔을 하기 위함이라고 생각합니다. 그 대안으로 디바이스 쉐이킹 핸드러를 적용한 이유이기도 합니다.

### 5. 캘린더 탭
- 뱅크샐러드 캘린더를 참고하여 직접 구현되었습니다. 사용자가 매장에서 출/퇴근 등록이 완료가 되면 해당 일자에 데이터가 표시됩니다.
- 달력에는 일자별로 총 근무 시간에 대한 급여가 환산되어 나타나며, 해당 날짜를 터치 시 근로 상세를 볼 수 있습니다.

### 6. 세팅 탭
- 나의정보 : 내 정보를 수정할 수 있습니다. 해당 페이지에서 로그아웃 가능합니다.
- 근태수정: 당월에 대한 근태수정 요청건 리스트를 보여줍니다. 해당 컴포넌트 터치시 지난 요청 건도 볼 수 있으며 리스트 터치시 상세보기도 가능합니다. 더불어 요청 취소도 가능합니다.
- 앱 알림: 사용자가 등록한 매장에서 새로운 공유가 올라올 경우 푸쉬알림을 받습니다.
  > 앱 알림의 경우 ios 계정과 firebase의 Functions 기능 업그레이드로 인해 안드로이드 테스트만 진행된 상태입니다.
- 테마변경: ContextAPI로 사용자가 지정한 테마로 변경 가능합니다. 멜론처럼 애니메이션 효과를 주어 보다 자연스럽게 색이 변하도록 구현하였습니다.
- 오픈소스: 해당 앱은 다양한 오픈소스 라이브러리의 도움을 받아 개발합니다. 
  
